{"ast":null,"code":"var _jsxFileName = \"/Users/mojib2014/Desktop/projects/blog-client/src/components/forms/loginForm.jsx\";\nimport React from \"react\";\nimport Joi from \"joi-browser\";\nimport auth from \"../../services/auth\";\nimport Form from \"../common/form\";\nimport Footer from \"../footer\";\nimport \"../../assets/css/login.css\";\n\nclass LoginForm extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        username: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      username: Joi.string().email().required().label(\"Username\"),\n      password: Joi.string().min(6).max(20).required().label(\"Password\")\n    };\n\n    this.doSubmit = async () => {\n      const {\n        username: email,\n        password\n      } = this.state.data;\n\n      try {\n        await auth.login(email, password);\n        const {\n          state\n        } = this.props.location;\n        window.location = state ? state.from.pathname : \"/\";\n      } catch (ex) {\n        if (ex.response && ex.response.status === 400) {\n          const errors = { ...this.state.errors\n          };\n          errors.username = ex.response.data;\n          this.setState({\n            errors\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 11\n      }\n    }, \"Sign in\"), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }\n    }, this.renderInput(\"username\", \"Username\", \"username\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderButton(\"Sign in\"))), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/Users/mojib2014/Desktop/projects/blog-client/src/components/forms/loginForm.jsx"],"names":["React","Joi","auth","Form","Footer","LoginForm","state","data","username","password","errors","schema","string","email","required","label","min","max","doSubmit","login","props","location","window","from","pathname","ex","response","status","setState","render","renderInput","renderButton"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,OAAO,4BAAP;;AAEA,MAAMC,SAAN,SAAwBF,IAAxB,CAA6B;AAAA;AAAA;AAAA,SAC3BG,KAD2B,GACnB;AACNC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,QAAQ,EAAE,EAAZ;AAAgBC,QAAAA,QAAQ,EAAE;AAA1B,OADA;AAENC,MAAAA,MAAM,EAAE;AAFF,KADmB;AAAA,SAM3BC,MAN2B,GAMlB;AACPH,MAAAA,QAAQ,EAAEP,GAAG,CAACW,MAAJ,GAAaC,KAAb,GAAqBC,QAArB,GAAgCC,KAAhC,CAAsC,UAAtC,CADH;AAEPN,MAAAA,QAAQ,EAAER,GAAG,CAACW,MAAJ,GAAaI,GAAb,CAAiB,CAAjB,EAAoBC,GAApB,CAAwB,EAAxB,EAA4BH,QAA5B,GAAuCC,KAAvC,CAA6C,UAA7C;AAFH,KANkB;;AAAA,SAW3BG,QAX2B,GAWhB,YAAY;AACrB,YAAM;AAAEV,QAAAA,QAAQ,EAAEK,KAAZ;AAAmBJ,QAAAA;AAAnB,UAAgC,KAAKH,KAAL,CAAWC,IAAjD;;AACA,UAAI;AACF,cAAML,IAAI,CAACiB,KAAL,CAAWN,KAAX,EAAkBJ,QAAlB,CAAN;AACA,cAAM;AAAEH,UAAAA;AAAF,YAAY,KAAKc,KAAL,CAAWC,QAA7B;AACAC,QAAAA,MAAM,CAACD,QAAP,GAAkBf,KAAK,GAAGA,KAAK,CAACiB,IAAN,CAAWC,QAAd,GAAyB,GAAhD;AACD,OAJD,CAIE,OAAOC,EAAP,EAAW;AACX,YAAIA,EAAE,CAACC,QAAH,IAAeD,EAAE,CAACC,QAAH,CAAYC,MAAZ,KAAuB,GAA1C,EAA+C;AAC7C,gBAAMjB,MAAM,GAAG,EAAE,GAAG,KAAKJ,KAAL,CAAWI;AAAhB,WAAf;AACAA,UAAAA,MAAM,CAACF,QAAP,GAAkBiB,EAAE,CAACC,QAAH,CAAYnB,IAA9B;AACA,eAAKqB,QAAL,CAAc;AAAElB,YAAAA;AAAF,WAAd;AACD;AACF;AACF,KAxB0B;AAAA;;AA0B3BmB,EAAAA,MAAM,GAAG;AACP,wBACE,uDACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKC,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,EAAyC,UAAzC,CADH,EAEG,KAAKA,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,EAAyC,UAAzC,CAFH,EAGG,KAAKC,YAAL,CAAkB,SAAlB,CAHH,CAFF,CADF,eASE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CADF;AAaD;;AAxC0B;;AA2C7B,eAAe1B,SAAf","sourcesContent":["import React from \"react\";\nimport Joi from \"joi-browser\";\n\nimport auth from \"../../services/auth\";\nimport Form from \"../common/form\";\nimport Footer from \"../footer\";\n\nimport \"../../assets/css/login.css\";\n\nclass LoginForm extends Form {\n  state = {\n    data: { username: \"\", password: \"\" },\n    errors: {},\n  };\n\n  schema = {\n    username: Joi.string().email().required().label(\"Username\"),\n    password: Joi.string().min(6).max(20).required().label(\"Password\"),\n  };\n\n  doSubmit = async () => {\n    const { username: email, password } = this.state.data;\n    try {\n      await auth.login(email, password);\n      const { state } = this.props.location;\n      window.location = state ? state.from.pathname : \"/\";\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400) {\n        const errors = { ...this.state.errors };\n        errors.username = ex.response.data;\n        this.setState({ errors });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <>\n        <div className=\"signin\">\n          <h1>Sign in</h1>\n          <form>\n            {this.renderInput(\"username\", \"Username\", \"username\")}\n            {this.renderInput(\"password\", \"Password\", \"password\")}\n            {this.renderButton(\"Sign in\")}\n          </form>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}